import{_ as P}from"./DJbEOzHK.js";import{f as E,g as w,r as K,h as G,i as J,j as W,k as x,l as L,c as d,o as p,a as F,m as $,n as H,v as Q,p as X,q as Y,F as M,s as T,x as Z,t as I,y as O,d as U,b as R,w as q}from"./BVespWRd.js";import{u as ee}from"./Dgux6RpD.js";function te(o){return typeof o=="string"?`'${o}'`:new se().serialize(o)}const se=function(){class o{#e=new Map;compare(e,t){const n=typeof e,r=typeof t;return n==="string"&&r==="string"?e.localeCompare(t):n==="number"&&r==="number"?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(e===null)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if(t!=="[object Object]")return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const n=e.constructor,r=n===Object||n===void 0?"":n.name;if(r!==""&&globalThis[r]===n)return this.serializeBuiltInType(r,e);if(typeof e.toJSON=="function"){const i=e.toJSON();return r+(i!==null&&typeof i=="object"?this.$object(i):`(${this.serialize(i)})`)}return this.serializeObjectEntries(r,Object.entries(e))}serializeBuiltInType(e,t){const n=this["$"+e];if(n)return n.call(this,t);if(typeof t?.entries=="function")return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const n=Array.from(t).sort((i,f)=>this.compare(i[0],f[0]));let r=`${e}{`;for(let i=0;i<n.length;i++){const[f,h]=n[i];r+=`${this.serialize(f,!0)}:${this.serialize(h)}`,i<n.length-1&&(r+=",")}return r+"}"}$object(e){let t=this.#e.get(e);return t===void 0&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return t.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let n=0;n<e.length;n++)t+=this.serialize(e[n]),n<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((t,n)=>this.compare(t,n)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const s of["Error","RegExp","URL"])o.prototype["$"+s]=function(e){return`${s}(${e})`};for(const s of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])o.prototype["$"+s]=function(e){return`${s}[${e.join(",")}]`};for(const s of["BigInt64Array","BigUint64Array"])o.prototype["$"+s]=function(e){return`${s}[${e.join("n,")}${e.length>0?"n":""}]`};return o}(),ne=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],re=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",B=[];class oe{_data=new S;_hash=new S([...ne]);_nDataBytes=0;_minBufferSize=0;finalize(s){s&&this._append(s);const e=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(t+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(s,e){const t=this._hash.words;let n=t[0],r=t[1],i=t[2],f=t[3],h=t[4],_=t[5],m=t[6],k=t[7];for(let l=0;l<64;l++){if(l<16)B[l]=s[e+l]|0;else{const a=B[l-15],u=(a<<25|a>>>7)^(a<<14|a>>>18)^a>>>3,g=B[l-2],c=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;B[l]=u+B[l-7]+c+B[l-16]}const j=h&_^~h&m,y=n&r^n&i^r&i,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),A=(h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25),z=k+A+j+re[l]+B[l],D=b+y;k=m,m=_,_=h,h=f+z|0,f=i,i=r,r=n,n=z+D|0}t[0]=t[0]+n|0,t[1]=t[1]+r|0,t[2]=t[2]+i|0,t[3]=t[3]+f|0,t[4]=t[4]+h|0,t[5]=t[5]+_|0,t[6]=t[6]+m|0,t[7]=t[7]+k|0}_append(s){typeof s=="string"&&(s=S.fromUtf8(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_process(s){let e,t=this._data.sigBytes/64;s?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const n=t*16,r=Math.min(n*4,this._data.sigBytes);if(n){for(let i=0;i<n;i+=16)this._doProcessBlock(this._data.words,i);e=this._data.words.splice(0,n),this._data.sigBytes-=r}return new S(e,r)}}class S{words;sigBytes;constructor(s,e){s=this.words=s||[],this.sigBytes=e===void 0?s.length*4:e}static fromUtf8(s){const e=unescape(encodeURIComponent(s)),t=e.length,n=[];for(let r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8;return new S(n,t)}toBase64(){const s=[];for(let e=0;e<this.sigBytes;e+=3){const t=this.words[e>>>2]>>>24-e%4*8&255,n=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,r=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,i=t<<16|n<<8|r;for(let f=0;f<4&&e*8+f*6<this.sigBytes*8;f++)s.push(ie.charAt(i>>>6*(3-f)&63))}return s.join("")}concat(s){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<s.sigBytes;e++){const t=s.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=t<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<s.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=s.words[e>>>2];this.sigBytes+=s.sigBytes}}function ae(o){return new oe().finalize(o).toBase64()}function C(o){return ae(te(o))}function N(o,s,e){const[t={},n]=typeof s=="string"?[{},s]:[s,e],r=E(()=>w(o)),i=E(()=>w(t.key)||"$f"+C([n,typeof r.value=="string"?r.value:"",...le(t)]));if(!t.baseURL&&typeof r.value=="string"&&r.value[0]==="/"&&r.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:f,lazy:h,default:_,transform:m,pick:k,watch:l,immediate:j,getCachedData:y,deep:b,dedupe:A,...z}=t,D=K({...G,...z,cache:typeof t.cache=="boolean"?void 0:t.cache}),a={server:f,lazy:h,default:_,transform:m,pick:k,immediate:j,getCachedData:y,deep:b,dedupe:A,watch:l===!1?[]:[...l||[],D]};let u;return ee(l===!1?i.value:i,()=>{u?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),u=typeof AbortController<"u"?new AbortController:{};const c=w(t.timeout);let v;return c&&(v=setTimeout(()=>u.abort(new DOMException("Request aborted due to timeout.","AbortError")),c),u.signal.onabort=()=>clearTimeout(v)),(t.$fetch||globalThis.$fetch)(r.value,{signal:u.signal,...D}).finally(()=>{clearTimeout(v)})},a)}function le(o){const s=[w(o.method)?.toUpperCase()||"GET",w(o.baseURL)];for(const e of[o.params||o.query]){const t=w(e);if(!t)continue;const n={};for(const[r,i]of Object.entries(t))n[w(r)]=w(i);s.push(n)}if(o.body){const e=w(o.body);if(!e)s.push(C(e));else if(e instanceof ArrayBuffer)s.push(C(Object.fromEntries([...new Uint8Array(e).entries()].map(([t,n])=>[t,n.toString()]))));else if(e instanceof FormData){const t={};for(const n of e.entries()){const[r,i]=n;t[r]=i instanceof File?i.name:i}s.push(C(t))}else if(J(e))s.push(C(K(e)));else try{s.push(C(e))}catch{console.warn("[useFetch] Failed to hash body",e)}}return s}const ce={class:"search-container inhalt"},ue={class:"search-bar"},he=["onKeydown"],fe={key:0,class:"suggestions-list"},de=["onClick","aria-selected"],pe={key:1,class:"hint"},ye={key:2},ge={key:0,class:"loading"},ve={key:1,class:"error"},_e={key:2,class:"results"},we={key:0,class:"glossar-link-box"},me={key:1,class:"glossar-link-box"},be={key:3,class:"no-results"},je=W({__name:"suche",async setup(o){let s,e;const t=x(""),n=x(!1),r=x(!1),i=x(-1),{data:f,pending:h,error:_}=([s,e]=L(()=>N("/data/definitionen.json",{server:!1},"$kb26t9E5yl")),s=await s,e(),s),{data:m,error:k}=([s,e]=L(()=>N("/data/tippsDaten.json",{server:!1},"$zN6Cy10Csj")),s=await s,e(),s),l=E(()=>{const a=f.value||[],u=m.value||[],g=a.map(v=>({...v,type:"definition"})),c=u.map(v=>({id:v.id,title:v.title,type:"tipp"}));return[...g,...c]}),j=E(()=>{if(!l.value)return[];const a=t.value.toLowerCase();return l.value.filter(u=>u.title.toLowerCase().includes(a))}),y=E(()=>{if(!l.value||!t.value)return[];const a=t.value.toLowerCase();return l.value.filter(u=>u.title.toLowerCase().startsWith(a)).slice(0,5)});function b(){t.value&&(r.value=!1,n.value=!0)}function A(a){t.value=a.title,r.value=!1,n.value=!0}function z(a){!r.value||!y.value.length||(a.key==="ArrowDown"?(a.preventDefault(),i.value=(i.value+1)%y.value.length):a.key==="ArrowUp"?(a.preventDefault(),i.value=(i.value-1+y.value.length)%y.value.length):a.key==="Enter"?i.value>=0?A(y.value[i.value]):b():a.key==="Escape"&&(r.value=!1))}function D(){i.value=-1,n.value=!1,r.value=!!t.value&&y.value.length>0}return(a,u)=>{const g=P;return p(),d("div",ce,[F("div",ue,[H(F("input",{"onUpdate:modelValue":u[0]||(u[0]=c=>t.value=c),placeholder:"Suchbegriff eingeben...",onInput:D,onKeydown:[z,X(Y(b,["prevent"]),["enter"])],autocomplete:"off"},null,40,he),[[Q,t.value]]),F("button",{onClick:b,"aria-label":"Suche starten"},"🔍")]),r.value?(p(),d("ul",fe,[(p(!0),d(M,null,T(y.value,(c,v)=>(p(),d("li",{key:c.id,onClick:V=>A(c),class:Z(["suggestion-item",{"active-suggestion":v===i.value}]),"aria-selected":v===i.value,role:"option"},I(c.title),11,de))),128))])):$("",!0),!t.value&&!n.value&&!O(h)?(p(),d("div",pe," Bitte geben Sie einen Suchbegriff ein... ")):$("",!0),n.value?(p(),d("div",ye,[O(h)?(p(),d("div",ge,"Lade Daten...")):$("",!0),O(_)?(p(),d("div",ve,"Fehler beim Laden der Daten")):$("",!0),j.value.length?(p(),d("div",_e,[(p(!0),d(M,null,T(j.value,c=>(p(),d("div",{key:`${c.type}-${c.id}`,class:"result-box"},[c.type==="definition"?(p(),d("div",we,[u[1]||(u[1]=U(" Glossar > ")),R(g,{to:`/glossar#${encodeURIComponent(c.title)}`,class:"glossar-link"},{default:q(()=>[U(I(c.title),1)]),_:2},1032,["to"])])):c.type==="tipp"?(p(),d("div",me,[u[2]||(u[2]=U(" Tipps > ")),R(g,{to:`/tipps#tipp-${c.id}`,class:"glossar-link"},{default:q(()=>[U(I(c.title),1)]),_:2},1032,["to"])])):$("",!0)]))),128))])):!O(h)&&!O(_)?(p(),d("div",be," Keine Ergebnisse gefunden. ")):$("",!0)])):$("",!0)])}}});export{je as default};
